<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="SWP201 - H·ªá th·ªëng ƒë·ªïi pin xe m√°y ƒëi·ªán th√¥ng minh - Qu·∫£n l√Ω ng∆∞·ªùi d√πng, tr·∫°m, thanh to√°n v·ªõi b·∫£n ƒë·ªì t∆∞∆°ng t√°c" />
  <title>SWP201 - H·ªá Th·ªëng ƒê·ªïi Pin Xe M√°y ƒêi·ªán</title>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
  
  <!-- Internal CSS -->
  <link rel="stylesheet" href="src/assets/css/main.css" />
  <link rel="stylesheet" href="src/assets/css/modals.css" />
  <link rel="stylesheet" href="src/assets/css/dashboard.css" />
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 24 24"><path d="M6 3h6l-1.5 3H7.8L6 3zm12 18h-6l1.5-3h2.7L18 21zM5 9h9l-1.5 3H6.5L5 9zm14 6h-9l1.5-3h6.5L19 15z"/></svg>
        </div>
        SWP201
      </div>
      <nav class="nav-links">
        <a href="#features">T√≠nh nƒÉng</a>
        <a href="#pricing">B·∫£ng gi√°</a>
        <a href="#stations">Tr·∫°m</a>
        <a href="#contact">Li√™n h·ªá</a>
      </nav>
      <div class="auth-buttons">
        <button class="btn" onclick="showLogin()">ƒêƒÉng nh·∫≠p</button>
        <button class="btn btn-primary" onclick="showRegister()">ƒêƒÉng k√Ω</button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="eyebrow">SWP201 ‚Ä¢ ƒê·ªïi pin trong 3 ph√∫t ‚Ä¢ Thanh to√°n th√¥ng minh ‚Ä¢ Qu·∫£n l√Ω t·ª± ƒë·ªông</div>
        <h1 class="title">SWP201: H·ªá th·ªëng <strong>ƒë·ªïi pin xe ƒëi·ªán</strong> th√¥ng minh</h1>
        <p class="subtitle">N·ªÅn t·∫£ng qu·∫£n l√Ω to√†n di·ªán cho ng∆∞·ªùi d√πng, nh√¢n vi√™n v√† qu·∫£n tr·ªã vi√™n. T√≠ch h·ª£p b·∫£n ƒë·ªì, thanh to√°n v√† theo d√µi real-time.</p>
        <div class="hero-actions">
          <button class="btn btn-primary" onclick="showLogin()">Truy c·∫≠p h·ªá th·ªëng</button>
          <button class="btn" onclick="scrollToId('stations')">Xem b·∫£n ƒë·ªì tr·∫°m</button>
        </div>
      </div>
    </section>

    <section id="features">
      <div class="container">
        <h2>T√≠nh nƒÉng h·ªá th·ªëng</h2>
        <div class="grid">
          <div class="card">
            <div class="icon">üë§</div>
            <h3>Dashboard ng∆∞·ªùi d√πng</h3>
            <p class="muted">Theo d√µi l·ªãch s·ª≠ ƒë·ªïi pin, thanh to√°n, t√¨m tr·∫°m g·∫ßn nh·∫•t v√† ƒë·∫∑t l·ªãch online.</p>
          </div>
          <div class="card">
            <div class="icon">üë®‚Äçüíº</div>
            <h3>Dashboard nh√¢n vi√™n</h3>
            <p class="muted">Qu·∫£n l√Ω tr·∫°m, theo d√µi t√¨nh tr·∫°ng pin, x·ª≠ l√Ω y√™u c·∫ßu kh√°ch h√†ng.</p>
          </div>
          <div class="card">
            <div class="icon">‚öôÔ∏è</div>
            <h3>Dashboard qu·∫£n tr·ªã</h3>
            <p class="muted">Th·ªëng k√™ to√†n h·ªá th·ªëng, qu·∫£n l√Ω ng∆∞·ªùi d√πng, c·∫•u h√¨nh v√† b√°o c√°o.</p>
          </div>
          <div class="card">
            <div class="icon">üó∫Ô∏è</div>
            <h3>B·∫£n ƒë·ªì t∆∞∆°ng t√°c</h3>
            <p class="muted">T√¨m tr·∫°m theo v·ªã tr√≠, xem t√¨nh tr·∫°ng real-time, ƒëi·ªÅu h∆∞·ªõng GPS.</p>
          </div>
          <div class="card">
            <div class="icon">üí≥</div>
            <h3>Thanh to√°n th√¥ng minh</h3>
            <p class="muted">Nhi·ªÅu ph∆∞∆°ng th·ª©c thanh to√°n, l·ªçc giao d·ªãch, xu·∫•t b√°o c√°o chi ti·∫øt.</p>
          </div>
          <div class="card">
            <div class="icon">üîã</div>
            <h3>Qu·∫£n l√Ω pin</h3>
            <p class="muted">Theo d√µi t√¨nh tr·∫°ng pin, l·ªãch b·∫£o tr√¨, t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="pricing">
      <div class="container">
        <h2>G√≥i d·ªãch v·ª•</h2>
        <div class="pricing">
          <div class="card">
            <h3>C∆° b·∫£n</h3>
            <div class="price">89.000ƒë/l∆∞·ª£t</div>
            <ul class="clean">
              <li><span class="tick">‚úì</span> ƒê·ªïi pin ti√™u chu·∫©n</li>
              <li><span class="tick">‚úì</span> App mobile</li>
              <li><span class="tick">‚úì</span> Thanh to√°n QR</li>
            </ul>
            <button class="btn btn-primary" onclick="showLogin()">ƒêƒÉng k√Ω ngay</button>
          </div>
          <div class="card featured">
            <h3>Premium <span class="chip">Ph·ªï bi·∫øn</span></h3>
            <div class="price">299.000ƒë/th√°ng</div>
            <ul class="clean">
              <li><span class="tick">‚úì</span> 8 l∆∞·ª£t/th√°ng</li>
              <li><span class="tick">‚úì</span> ∆Øu ti√™n t·∫°i tr·∫°m</li>
              <li><span class="tick">‚úì</span> H·ªó tr·ª£ 24/7</li>
              <li><span class="tick">‚úì</span> B√°o c√°o chi ti·∫øt</li>
            </ul>
            <button class="btn btn-primary" onclick="showLogin()">Ch·ªçn g√≥i</button>
          </div>
          <div class="card">
            <h3>Doanh nghi·ªáp</h3>
            <div class="price">Li√™n h·ªá</div>
            <ul class="clean">
              <li><span class="tick">‚úì</span> Kh√¥ng gi·ªõi h·∫°n</li>
              <li><span class="tick">‚úì</span> API t√≠ch h·ª£p</li>
              <li><span class="tick">‚úì</span> Dashboard qu·∫£n l√Ω</li>
              <li><span class="tick">‚úì</span> SLA 99.9%</li>
            </ul>
            <button class="btn" onclick="showContact()">T∆∞ v·∫•n</button>
          </div>
        </div>
      </div>
    </section>

    <section id="stations">
      <div class="container">
        <h2>B·∫£n ƒë·ªì tr·∫°m ƒë·ªïi pin</h2>
        <div class="map-container">
          <div id="map" style="height: 400px; border-radius: 12px; overflow: hidden;"></div>
        </div>
        <div class="station-info">
          <div class="grid stations">
            <div class="card" id="selected-station">
              <h3>Ch·ªçn tr·∫°m tr√™n b·∫£n ƒë·ªì</h3>
              <p class="muted">Click v√†o c√°c marker ƒë·ªÉ xem th√¥ng tin chi ti·∫øt tr·∫°m.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container">
        <h2>Li√™n h·ªá h·ªó tr·ª£</h2>
        <div class="contact-grid">
          <div class="card">
            <h3>üìû Hotline</h3>
            <p>1900 xxxx (24/7)</p>
            <p class="muted">H·ªó tr·ª£ kh·∫©n c·∫•p v√† t∆∞ v·∫•n</p>
          </div>
          <div class="card">
            <h3>‚úâÔ∏è Email</h3>
            <p>support@doipin.vn</p>
            <p class="muted">G√≥p √Ω v√† h·ªó tr·ª£ k·ªπ thu·∫≠t</p>
          </div>
          <div class="card">
            <h3>üìç VƒÉn ph√≤ng</h3>
            <p>T·∫ßng 10, T√≤a nh√† FPT</p>
            <p class="muted">TP.HCM & H√† N·ªôi</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <h4>SWP201</h4>
          <p>H·ªá th·ªëng ƒë·ªïi pin xe ƒëi·ªán th√¥ng minh h√†ng ƒë·∫ßu Vi·ªát Nam</p>
        </div>
        <div>
          <h4>Li√™n k·∫øt</h4>
          <a href="#features">T√≠nh nƒÉng</a>
          <a href="#pricing">B·∫£ng gi√°</a>
          <a href="#stations">Tr·∫°m</a>
        </div>
        <div>
          <h4>H·ªó tr·ª£</h4>
          <a href="#contact">Li√™n h·ªá</a>
          <a href="#">H∆∞·ªõng d·∫´n</a>
          <a href="#">FAQ</a>
        </div>
      </div>
      <div class="footer-bottom">
        ¬© 2025 SWP201 ‚Ä¢ H·ªá th·ªëng qu·∫£n l√Ω th√¥ng minh
      </div>
    </div>
  </footer>

  <!-- Modals will be loaded dynamically -->
  <div id="modals-container"></div>
  
  <!-- Toast notification -->
  <div id="toast" class="toast"></div>

  <!-- External JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  
  <!-- Internal JavaScript - Load in correct order -->
  <script src="src/assets/js/main.js"></script>
  <script src="src/assets/js/dashboard.js"></script>
  <script src="src/assets/js/payment.js"></script>
  <script src="src/components/modals.js"></script>
  
  <!-- Initialize app -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded');
      console.log('Auth object exists:', typeof auth !== 'undefined');
      console.log('handleLogin function exists:', typeof handleLogin !== 'undefined');
      console.log('showDashboard function exists:', typeof showDashboard !== 'undefined');
      console.log('createDashboard function exists:', typeof createDashboard !== 'undefined');
      
      // Test function
      window.testDashboard = function() {
        console.log('Testing dashboard creation...');
        createDashboard('user');
        const dashboard = document.getElementById('userDashboard');
        if (dashboard) {
          console.log('Dashboard created successfully');
          dashboard.style.display = 'block';
          dashboard.style.position = 'fixed';
          dashboard.style.top = '0';
          dashboard.style.left = '0';
          dashboard.style.width = '100%';
          dashboard.style.height = '100%';
          dashboard.style.zIndex = '9999';
          dashboard.style.background = 'var(--bg)';
          console.log('Dashboard should now be visible');
        } else {
          console.error('Dashboard not found after creation');
        }
      };
      
      // Test login function
      window.testLogin = function() {
        console.log('Testing login process...');
        const result = auth.login('user@demo.com', '123456', 'user');
        console.log('Login result:', result);
        if (result.success) {
          console.log('Login successful, showing dashboard...');
          showDashboard('user');
        } else {
          console.error('Login failed:', result.message);
        }
      };
      
      // Quick login bypass
      window.quickDashboard = function(role = 'user') {
        console.log('Quick dashboard test for role:', role);
        // Simulate successful login
        auth.currentUser = {
          username: 'test@demo.com',
          role: role,
          name: 'Test User'
        };
        auth.isLoggedIn = true;
        showDashboard(role);
      };
      
      // Debug dashboard visibility
      window.debugDashboard = function() {
        const dashboard = document.getElementById('userDashboard');
        if (dashboard) {
          console.log('Dashboard element found');
          console.log('Dashboard innerHTML length:', dashboard.innerHTML.length);
          console.log('Dashboard computed style:', window.getComputedStyle(dashboard));
          console.log('Dashboard position:', dashboard.getBoundingClientRect());
          
          // Force maximum visibility
          dashboard.style.cssText = `
            display: block !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 99999 !important;
            background: #0b1020 !important;
            color: white !important;
            overflow: auto !important;
          `;
          
          console.log('Applied forced styles to dashboard');
        } else {
          console.error('Dashboard element not found');
        }
      };
      
      // Initialize modals
      if (typeof initializeModals === 'function') {
        initializeModals();
      }
      
      // Check for existing session
      if (auth && typeof auth.checkSession === 'function') {
        if (auth.checkSession()) {
          console.log('Found existing session for:', auth.currentUser);
          showDashboard(auth.currentUser.role);
        }
      }
    });
  </script>
</body>
</html>